name: mac_ci

on: push

jobs:
 mac_ci_job:
  runs-on: macos-latest
   
  steps:
   - name: checkout source code
     uses: actions/checkout@master
     
   - name: Install Qt
     uses: jurplel/install-qt-action@v2
     with:
      version: '5.15.2'
      host: 'mac'
      target: 'desktop'
      dir: '${{ github.workspace }}/example/'
     
   - name: install and set env
     run: |
      brew install gcc
      brew install ninja
      echo "CXX=g++" >> $GITHUB_ENV
      echo "CMAKE_GENERATOR=Ninja" >> $GITHUB_ENV
      g++ -v
      ninja --version
      cmake -version
      echo ${CXX}
      echo ${CMAKE_GENERATOR}
     
   - name: build
     run: |
      sudo mkdir ./build
      cd ./build
      cmake ..
      ninja
      ctest -V